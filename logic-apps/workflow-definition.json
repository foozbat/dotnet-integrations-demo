{
  "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "$connections": {
      "type": "Object",
      "defaultValue": {}
    },
    "zapierWebhookUrl": {
      "type": "String",
      "defaultValue": ""
    }
  },
  "triggers": {
    "When_an_HTTP_request_is_received": {
      "type": "Request",
      "kind": "Http",
      "inputs": {
        "schema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "description": "Lead ID"
            },
            "firstName": {
              "type": "string",
              "description": "Lead first name"
            },
            "lastName": {
              "type": "string",
              "description": "Lead last name"
            },
            "email": {
              "type": "string",
              "description": "Lead email address"
            },
            "phone": {
              "type": "string",
              "description": "Lead phone number"
            },
            "correlationId": {
              "type": "string",
              "description": "Correlation ID for tracking"
            },
            "createdAt": {
              "type": "string",
              "description": "Creation timestamp"
            },
            "updatedAt": {
              "type": "string",
              "description": "Update timestamp"
            }
          }
        }
      }
    }
  },
  "actions": {
    "Trigger_Zapier_Webhook_(HTTP)": {
      "runAfter": {},
      "type": "Http",
      "inputs": {
        "uri": "@parameters('zapierWebhookUrl')",
        "method": "POST",
        "body": "@triggerBody()"
      },
      "runtimeConfiguration": {
        "contentTransfer": {
          "transferMode": "Chunked"
        }
      }
    }
  },
  "outputs": {}
}
